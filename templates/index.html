{% extends "base.html" %}

{% block title %}ุนููู ุงููุฑุขู - ุงูุฑุฆูุณูุฉ{% endblock %}

{% block content %}
<section class="hero">
    <div class="container">
        <h1>ุนููู ุงููุฑุขู</h1>
        <p>ููุตุฉ ุดุงููุฉ ููุชูุณูุฑ ุงูููุงุฑู ูุงููุฑุงุกุงุช ุงูุนุดุฑ ูุฃุณุจุงุจ ุงููุฒูู</p>
    </div>
</section>

<div class="container">
    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="number">{{ "{:,}".format(stats.verses) }}</div>
            <div class="label">ุขูุฉ ูุฑููุฉ</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ "{:,}".format(stats.tafsirs) }}</div>
            <div class="label">ุชูุณูุฑ</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ "{:,}".format(stats.qiraat) }}</div>
            <div class="label">ูุฑู ูู ุงููุฑุงุกุงุช</div>
        </div>
        <div class="stat-card">
            <div class="number">{{ "{:,}".format(stats.asbab) }}</div>
            <div class="label">ุณุจุจ ูุฒูู</div>
        </div>
    </div>

    <!-- Features -->
    <div class="features-grid">
        <a href="/quran" class="feature-card">
            <div class="icon">๐</div>
            <h3>ุงููุฑุขู ุงููุฑูู</h3>
            <p>ุชุตูุญ ุงููุฑุขู ุงููุฑูู ุจุงูุฑุณู ุงูุนุซูุงูู ูุน ุฅููุงููุฉ ุงูุจุญุซ</p>
        </a>

        <a href="/tafsir" class="feature-card">
            <div class="icon">๐</div>
            <h3>ุงูุชูุณูุฑ ุงูููุงุฑู</h3>
            <p>ูุงุฑู ุจูู ุชูุงุณูุฑ ุงูุนููุงุก ูู ุงูุทุจุฑู ุฅูู ุงุจู ุนุงุดูุฑ</p>
        </a>

        <a href="/qiraat" class="feature-card">
            <div class="icon">๐๏ธ</div>
            <h3>ุงููุฑุงุกุงุช ุงูุนุดุฑ</h3>
            <p>ุงูุชุดู ุงููุฑูู ุจูู ุงููุฑุงุกุงุช ุงูุนุดุฑ ุงููุชูุงุชุฑุฉ</p>
        </a>

        <a href="/asbab" class="feature-card">
            <div class="icon">๐</div>
            <h3>ุฃุณุจุงุจ ุงููุฒูู</h3>
            <p>ุชุนุฑู ุนูู ุฃุณุจุงุจ ูุฒูู ุงูุขูุงุช ูุณูุงููุง ุงูุชุงุฑูุฎู</p>
        </a>

        <a href="/mutashabihat" class="feature-card">
            <div class="icon">๐</div>
            <h3>ุงููุชุดุงุจูุงุช</h3>
            <p>ุงูุชุดู ุงูุขูุงุช ุงููุชุดุงุจูุฉ ูู ุงููุฑุขู ูุน ุชุญููู ุงููุฑูู</p>
        </a>

        <a href="/ai" class="feature-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <div class="icon">๐ค</div>
            <h3 style="color: white;">ุงููุณุงุนุฏ ุงูุฐูู</h3>
            <p style="color: rgba(255,255,255,0.9);">ุงุณุฃู ุฃู ุณุคุงู ุนู ุงููุฑุขู ูุงุญุตู ุนูู ุฅุฌุงุจุฉ ุฐููุฉ</p>
        </a>
    </div>

    <!-- Quick Search -->
    <div class="card mt-3">
        <h3>ุงูุจุญุซ ุงูุณุฑูุน</h3>
        <div class="search-box">
            <input type="text" id="quick-search" placeholder="ุงุจุญุซ ูู ุงููุฑุขู ุงููุฑูู...">
            <button onclick="performQuickSearch()">ุจุญุซ</button>
        </div>
        <div id="search-results"></div>
    </div>

    <!-- Available Tafsirs -->
    <div class="card mt-3">
        <h3>ุงูุชูุงุณูุฑ ุงููุชููุฑุฉ</h3>
        <div class="tafsir-list" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุฌุงูุน ุงูุจูุงู</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงูุฅูุงู ุงูุทุจุฑู (ุช 310ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุชูุณูุฑ ุงุจู ูุซูุฑ</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงุจู ูุซูุฑ (ุช 774ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ูุนุงูู ุงูุชูุฒูู</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงูุจุบูู (ุช 516ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุงูุฌุงูุน ูุฃุญูุงู ุงููุฑุขู</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงููุฑุทุจู (ุช 671ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุชูุณูุฑ ุงููุฑูู ุงูุฑุญูู</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงูุณุนุฏู (ุช 1376ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุงูุชุญุฑูุฑ ูุงูุชูููุฑ</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ุงุจู ุนุงุดูุฑ (ุช 1393ูู)</p>
            </div>
            <div class="tafsir-card" style="padding: 1rem; background: #f8f7f5; border-radius: 8px;">
                <strong>ุงููุณูุท</strong>
                <p style="color: var(--text-light); margin-top: 0.3rem;">ูุญูุฏ ุณูุฏ ุทูุทุงูู (ุช 1431ูู)</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
async function performQuickSearch() {
    const query = document.getElementById('quick-search').value.trim();
    if (query.length < 2) {
        alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุชูู ุนูู ุงูุฃูู ููุจุญุซ');
        return;
    }

    const resultsContainer = document.getElementById('search-results');
    showLoading(resultsContainer);

    const results = await searchQuran(query);

    if (!results || results.length === 0) {
        resultsContainer.innerHTML = '<p style="text-align: center; padding: 2rem; color: var(--text-light);">ูุง ุชูุฌุฏ ูุชุงุฆุฌ</p>';
        return;
    }

    let html = '<div style="margin-top: 1rem;">';
    results.slice(0, 10).forEach(result => {
        html += `
            <div class="verse-item" onclick="showVerseDetails('${result.verse_key}')" style="cursor: pointer;">
                <p style="color: var(--text-light); margin-bottom: 0.5rem;">${result.surah_name} - ${result.verse_key}</p>
                <p class="verse-text" style="font-size: 1.2rem;">${result.text_uthmani}</p>
            </div>
        `;
    });
    html += '</div>';

    if (results.length > 10) {
        html += `<p style="text-align: center; color: var(--text-light);">ูุฃูุซุฑ ูู ${results.length - 10} ูุชูุฌุฉ ุฃุฎุฑู...</p>`;
    }

    resultsContainer.innerHTML = html;
}

// Search on Enter key
document.getElementById('quick-search').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') performQuickSearch();
});
</script>
{% endblock %}
